<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright 2010 Cecil Curry <leycec@gmail.com>
     Distributed under the terms of the GNU General Public License v2
     Based in part upon 'dev-java/swt/files/build.xml' from Gentoo, which is:
          Copyright 1999-2010 Gentoo Foundation
     
     The "build.xml" bundled with Eclipse is Eclipse-specific, and in fact both
     assumes and requires Eclipse be already installed. This is an obvious
     problem for a source-based distribution, since the Eclipse exheres depends
     on the SWT exheres. (Ergo, the SWT exheres cannot itself depend on the
     Eclipse exheres.)

     To circumvent this circular dependency, the "build.xml" below entirely
     replaces the bundled "build.xml" with a vanilla Ant project performing
     only compilation and simple OSGi-compatible jarring.
  -->
<project name="swt" default="jar" basedir=".">
  <property name="src"   location="src"/>
  <property name="build" location="build"/>
  <property name="dist"  location="dist"/>
  <property name="jar"   value="${ant.project.name}.jar"/>

  <target name="init">
     <tstamp/>
     <mkdir dir="${build}"/>
     <mkdir dir="${dist}"/>
  </target>

  <!-- Compile SWT against JDK 1.4, so as to suppress raw type warnings!
       (This will probably come back to hurt us when they bump versions!) -->
  <target name="compile" depends="init">
    <javac srcdir="${src}" destdir="${build}" source="1.4" target="1.4"/>
  </target>

  <target name="jar" depends="compile">
    <jar jarfile="${dist}/${jar}" basedir="${build}" manifest="MANIFEST.MF"/>
  </target>
</project>
